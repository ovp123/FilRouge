<ng-container *ngIf="collaborateurs">

  <h2>{{collaborateurs.length }} Collaborateurs </h2>
  <p-table #dt [value]="collaborateurs" [globalFilterFields]="['uid','nom','prenom','fonction','codeAgence','aMigrer']" [paginator]="true" [rows]="collaborateurs.length" [rowsPerPageOptions]="[5,10,50,100,collaborateurs.length]" paginatorPosition="both">
    <ng-template pTemplate="caption">
      <div style="text-align: right">
        <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
        <input type="text" pInputText size="50" placeholder="Global Filter" (input)="dt.filterGlobal($event.target.value, 'contains')" style="width:auto">
      </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th [pSortableColumn]= "'uid'">Uid
              <p-sortIcon [field]="'uid'"></p-sortIcon>
            </th>
            <th colspan="2" [pSortableColumn]= "'nom'">Nom<p-sortIcon [field]="'nom'"></p-sortIcon></th>

            <th colspan="2" [pSortableColumn]= "'prenom'">Prénom<p-sortIcon [field]="'prenom'"></p-sortIcon></th>

            <th colspan="3" [pSortableColumn]= "'fonction'">Fonction<p-sortIcon [field]="'fonction'"></p-sortIcon></th>

            <th [pSortableColumn]= "'codeAgence'">code Agence<p-sortIcon [field]="'codeAgence'"></p-sortIcon></th>

            <th  [pSortableColumn]= "'aMigrer'">à Migrer<p-sortIcon [field]="'aMigrer'"></p-sortIcon></th>

        </tr>
    </ng-template>
    {{collaborateurs.length }}

      <ng-template pTemplate="body" let-collaborateur>
          <tr pDraggable="collaborateur" (onDragStart)="dragStart($event,collaborateur)" (onDragEnd)="dragEnd($event)">
              <td>{{collaborateur.uid}}</td>
              <td colspan="2">{{collaborateur.nom}}</td>
              <td colspan="2">{{collaborateur.prenom}}</td>
              <td colspan="3">{{collaborateur.fonction}}</td>
              <td>{{collaborateur.codeAgence}}</td>
              <td>{{collaborateur.aMigrer}}</td>
              <td>
                <span class="drop" pDroppable="collaborateur" (onDrop)="dropView($event)" ><i class="icone far fa-eye fa-lg" (click)="viewDetailCollaborator(collaborateur)"> </i></span>&nbsp;&nbsp;&nbsp;&nbsp;
                <i class="icone fas fa-exchange-alt fa-lg" ></i>&nbsp;&nbsp;&nbsp;&nbsp;
                <a [routerLink]="['/collaborateurs',collaborateur.uid]"><i class="icone far fa-file fa-lg"></i></a>&nbsp;&nbsp;&nbsp;&nbsp;
                <span class="drop" pDroppable="collaborateur" (onDrop)="dropTrash($event)" ><i class="icone icone far fa-trash-alt" (click)="openTrash(collaborateur)"></i></span>
              </td>
          </tr>


      </ng-template>

  </p-table>


  <p-dialog header="Supression" [(visible)]="trash" [style]="{width: '20%'}" [modal]="true" [maximizable]=true>
    Etes vous certain de vouloir supprimer ce collaborateur ?
   <br>
   <b>ATTENTION : </b> Cette action est irréversible
   <br><br>
   SUPPRESSION :
   <p-button label="Non" (onClick)="closeTrash()"></p-button>
   &nbsp;&nbsp; ou &nbsp;&nbsp;
   <p-button label="Oui" styleClass="ui-button-danger" (click)="onDelete(collaborateur)"></p-button>
  </p-dialog>





</ng-container>
